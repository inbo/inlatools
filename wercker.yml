box: rocker/verse:latest
build:
  steps:
    - script:
      code: |
        Rscript -e 'install.packages("rlang")'
    - jimhester/r-dependencies
    - jimhester/r-check
    - jimhester/r-coverage
    - jimhester/r-lint

build-dev:
  box: rocker/verse:devel
  steps:
    - jimhester/r-dependencies
    - jimhester/r-check

deploy:
  steps:
    - script:
        code: |
          zip -r website.zip docs
          curl -H "Content-Type: application/zip" \
               -H "Authorization: Bearer $NETLIFY_KEY" \
               --data-binary "@website.zip" \
               https://api.netlify.com/api/v1/sites/$NETLIFY_SITEID/deploys
