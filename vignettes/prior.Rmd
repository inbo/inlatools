---
title: "Setting a prior"
author: "Thierry Onkelinx"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Setting a prior}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
library(knitr)
opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r}
library(inlatools)
```

## "iid" random intercept

### Testing `sigma`

`simulate_iid()` generates a number of iid random intercepts from a Gaussian distribution with standard deviation `sigma`.

```{r}
x <- simulate_iid(sigma = 1)
y <- simulate_iid(sigma = 0.1)
```

`plot()` on the simulated random intercepts yields a density with indication of the quantiles.

```{r, fig.show='hold'}
plot(x)
plot(y)
```

Adding `link = "log"` displays the density after back transformation of the random intercepts using the log-link. The random intercept can be interpreted as a relative effect.

```{r, fig.show='hold'}
plot(x, link = "log")
plot(y, link = "log")
```

Adding `link = "logit"` displays the individual random intercepts after back transformation using the loglit-link. Since the influence of the random intercept depends on base proportion, the plot shows for each random intercept the resulting proportion after adding the random intercept to the base proportion.

```{r, fig.show='hold'}
plot(x, link = "logit")
plot(y, link = "logit")
```

### Testing `tau`

One can specify the precision `tau` ($\tau$) instead of the standard deviation `sigma` ($\sigma$). Note that the precision is the inverse of the variance ($\tau = 1 / \sigma ^ 2$).

```{r}
z <- simulate_iid(tau = 10)
plot(z)
```

You must either specify `sigma` or `tau`, the other must remain `NULL` (the default).

```{r error = TRUE}
simulate_iid(sigma = 0.1, tau = 100)
```
